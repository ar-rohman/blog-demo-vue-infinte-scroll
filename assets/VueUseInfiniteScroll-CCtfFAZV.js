import{u as J,o as k,n as H,a as Q,i as Z,g as X,b as ee,c as te,r as V,d as y,e as x,w as R,f as ne,L as oe,h as B,j as re}from"./index-D35zDmht.js";function q(e){return ee()?(te(e),!0):!1}function b(e){return typeof e=="function"?e():J(e)}const le=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const se=e=>e!=null,ie=Object.prototype.toString,ue=e=>ie.call(e)==="[object Object]",_=()=>{};function K(e,n){function t(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>n.apply(this,o),{fn:n,thisArg:this,args:o})).then(r).catch(i)})}return t}function ae(e,n={}){let t,o,r=_;const i=u=>{clearTimeout(u),r(),r=_};return u=>{const f=b(e),l=b(n.maxWait);return t&&i(t),f<=0||l!==void 0&&l<=0?(o&&(i(o),o=null),Promise.resolve(u())):new Promise((a,c)=>{r=n.rejectOnCancel?c:a,l&&!o&&(o=setTimeout(()=>{t&&i(t),o=null,a(u())},l)),t=setTimeout(()=>{o&&i(o),o=null,a(u())},f)})}}function ce(...e){let n=0,t,o=!0,r=_,i,d,u,f,l;!Z(e[0])&&typeof e[0]=="object"?{delay:d,trailing:u=!0,leading:f=!0,rejectOnCancel:l=!1}=e[0]:[d,u=!0,f=!0,l=!1]=e;const a=()=>{t&&(clearTimeout(t),t=void 0,r(),r=_)};return m=>{const v=b(d),p=Date.now()-n,T=()=>i=m();return a(),v<=0?(n=Date.now(),T()):(p>v&&(f||!o)?(n=Date.now(),T()):u&&(i=new Promise((g,h)=>{r=l?h:g,t=setTimeout(()=>{n=Date.now(),o=!0,g(T()),a()},Math.max(0,v-p))})),!f&&!t&&(t=setTimeout(()=>o=!0,v)),o=!1,i)}}function Y(e){return X()}function fe(e,n=200,t={}){return K(ae(n,t),e)}function de(e,n=200,t=!1,o=!0,r=!1){return K(ce(n,t,o,r),e)}function me(e,n=!0,t){Y()?k(e,t):n?e():H(e)}function ve(e,n){Y()&&Q(e,n)}const C=le?window:void 0;function I(e){var n;const t=b(e);return(n=t==null?void 0:t.$el)!=null?n:t}function G(...e){let n,t,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,r]=e,n=C):[n,t,o,r]=e,!n)return _;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const i=[],d=()=>{i.forEach(a=>a()),i.length=0},u=(a,c,m,v)=>(a.addEventListener(c,m,v),()=>a.removeEventListener(c,m,v)),f=R(()=>[I(n),b(r)],([a,c])=>{if(d(),!a)return;const m=ue(c)?{...c}:c;i.push(...t.flatMap(v=>o.map(p=>u(a,v,p,m))))},{immediate:!0,flush:"post"}),l=()=>{f(),d()};return q(l),l}function pe(){const e=y(!1),n=X();return n&&k(()=>{e.value=!0},n),e}function he(e){const n=pe();return x(()=>(n.value,!!e()))}function be(e,n,t={}){const{root:o,rootMargin:r="0px",threshold:i=0,window:d=C,immediate:u=!0}=t,f=he(()=>d&&"IntersectionObserver"in d),l=x(()=>{const p=b(e);return(Array.isArray(p)?p:[p]).map(I).filter(se)});let a=_;const c=y(u),m=f.value?R(()=>[l.value,I(o),c.value],([p,T])=>{if(a(),!c.value||!p.length)return;const g=new IntersectionObserver(n,{root:I(T),rootMargin:r,threshold:i});p.forEach(h=>h&&g.observe(h)),a=()=>{g.disconnect(),a=_}},{immediate:u,flush:"post"}):_,v=()=>{a(),m(),c.value=!1};return q(v),{isSupported:f,isActive:c,pause(){a(),c.value=!1},resume(){c.value=!0},stop:v}}function ge(e,n={}){const{window:t=C,scrollTarget:o,threshold:r=0}=n,i=y(!1);return be(e,d=>{let u=i.value,f=0;for(const l of d)l.time>=f&&(f=l.time,u=l.isIntersecting);i.value=u},{root:o,window:t,threshold:r}),i}function we(e){return typeof Window<"u"&&e instanceof Window?e.document.documentElement:typeof Document<"u"&&e instanceof Document?e.documentElement:e}const N=1;function ye(e,n={}){const{throttle:t=0,idle:o=200,onStop:r=_,onScroll:i=_,offset:d={left:0,right:0,top:0,bottom:0},eventListenerOptions:u={capture:!1,passive:!0},behavior:f="auto",window:l=C,onError:a=s=>{console.error(s)}}=n,c=y(0),m=y(0),v=x({get(){return c.value},set(s){T(s,void 0)}}),p=x({get(){return m.value},set(s){T(void 0,s)}});function T(s,L){var w,M,O,D;if(!l)return;const E=b(e);if(!E)return;(O=E instanceof Document?l.document.body:E)==null||O.scrollTo({top:(w=b(L))!=null?w:p.value,left:(M=b(s))!=null?M:v.value,behavior:b(f)});const W=((D=E==null?void 0:E.document)==null?void 0:D.documentElement)||(E==null?void 0:E.documentElement)||E;v!=null&&(c.value=W.scrollLeft),p!=null&&(m.value=W.scrollTop)}const g=y(!1),h=V({left:!0,right:!1,top:!0,bottom:!1}),S=V({left:!1,right:!1,top:!1,bottom:!1}),j=s=>{g.value&&(g.value=!1,S.left=!1,S.right=!1,S.top=!1,S.bottom=!1,r(s))},z=fe(j,t+o),P=s=>{var L;if(!l)return;const w=((L=s==null?void 0:s.document)==null?void 0:L.documentElement)||(s==null?void 0:s.documentElement)||I(s),{display:M,flexDirection:O}=getComputedStyle(w),D=w.scrollLeft;S.left=D<c.value,S.right=D>c.value;const E=Math.abs(D)<=(d.left||0),W=Math.abs(D)+w.clientWidth>=w.scrollWidth-(d.right||0)-N;M==="flex"&&O==="row-reverse"?(h.left=W,h.right=E):(h.left=E,h.right=W),c.value=D;let A=w.scrollTop;s===l.document&&!A&&(A=l.document.body.scrollTop),S.top=A<m.value,S.bottom=A>m.value;const $=Math.abs(A)<=(d.top||0),U=Math.abs(A)+w.clientHeight>=w.scrollHeight-(d.bottom||0)-N;M==="flex"&&O==="column-reverse"?(h.top=U,h.bottom=$):(h.top=$,h.bottom=U),m.value=A},F=s=>{var L;if(!l)return;const w=(L=s.target.documentElement)!=null?L:s.target;P(w),g.value=!0,z(s),i(s)};return G(e,"scroll",t?de(F,t,!0,!1):F,u),me(()=>{try{const s=b(e);if(!s)return;P(s)}catch(s){a(s)}}),G(e,"scrollend",j,u),{x:v,y:p,isScrolling:g,arrivedState:h,directions:S,measure(){const s=b(e);l&&s&&P(s)}}}function Se(e,n,t={}){var o;const{direction:r="bottom",interval:i=100,canLoadMore:d=()=>!0}=t,u=V(ye(e,{...t,offset:{[r]:(o=t.distance)!=null?o:0,...t.offset}})),f=y(),l=x(()=>!!f.value),a=x(()=>we(b(e))),c=ge(a);function m(){if(u.measure(),!a.value||!c.value||!d(a.value))return;const{scrollHeight:p,clientHeight:T,scrollWidth:g,clientWidth:h}=a.value,S=r==="bottom"||r==="top"?p<=T:g<=h;(u.arrivedState[r]||S)&&(f.value||(f.value=Promise.all([n(u),new Promise(j=>setTimeout(j,i))]).finally(()=>{f.value=null,H(()=>m())})))}const v=R(()=>[u.arrivedState[r],c.value],m,{immediate:!0});return ve(v),{isLoading:l,reset(){H(()=>m())}}}const Te={__name:"VueUseInfiniteScroll",setup(e){const n=y(document),t=y(1),o=y(20),r=y(),i=y([]);Se(n,()=>{t.value*o.value<=r.value&&(t.value++,d())},{distance:10});const d=async()=>{const u=`${B.apiUrl}?key=${B.apiKey}&q=flower&page=${t.value}&per_page=${o.value}`,l=await(await fetch(u)).json();i.value=[...i.value,...l.hits],r.value=l.totalHits};return k(()=>{d()}),(u,f)=>(re(),ne(oe,{data:i.value},null,8,["data"]))}};export{Te as default};
